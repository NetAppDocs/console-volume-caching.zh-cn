---
sidebar: sidebar 
permalink: use/cache-create.html 
keywords: volume caching, Volume caching 
summary: 卷缓存在远程位置提供持久的、可写的卷。您可以使用卷缓存来加快数据访问速度或卸载访问频繁的卷的流量。缓存卷非常适合读取密集型工作负载，尤其是客户端需要重复访问相同数据的情况。 
---
= 使用卷缓存创建缓存
:hardbreaks:
:allow-uri-read: 
:icons: font
:imagesdir: ../media/


[role="lead"]
卷缓存在远程位置提供持久的、可写的卷。您可以使用卷缓存来加快数据访问速度或卸载访问频繁的卷的流量。缓存卷非常适合读取密集型工作负载，尤其是客户端需要重复访问相同数据的情况。您可以在Amazon FSx for ONTAP、 Cloud Volumes ONTAP和本地ONTAP之间创建卷缓存，并使用源系统中的一个或多个源卷作为缓存源。然后，为缓存卷选择存储虚拟机。

缓存卷可以与源卷位于同一集群或不同的集群上。您选择缓存的卷必须属于同一个存储虚拟机，并且存储虚拟机必须使用相同的协议。


TIP: 如果卷不符合缓存条件，它们将显示为灰色，以便您无法选择它们。

您可以输入缓存卷的大小作为源卷大小的百分比。


NOTE: 缓存卷使用的 IPSpace 取决于源存储虚拟机使用的 IPSpace。

缓存卷名称使用后缀 `pass:macros[_cache]`添加到原始卷名。



== 卷缓存登录页面的步骤

. 登录到NetApp Console。
. 从左侧导航中选择*移动性*>*卷缓存*。
+
您将进入卷缓存仪表板页面。当您第一次启动卷缓存选项时，您需要添加缓存信息。稍后，仪表板会出现并显示有关缓存的数据。

+

NOTE: 如果您尚未设置NetApp Console代理，则会出现选项 *添加控制台代理*，而不是 *添加缓存*。在这种情况下，您需要首先设置控制台代理。请参阅 https://docs.netapp.com/us-en/cloud-manager-setup-admin/task-quick-start-standard-mode.html["NetApp Console快速入门"^]。

+
image:landing-page.png["卷缓存的登录页面"]

. 选择*添加缓存*。
. 在缓存数据页面中，选择系统源和目标缓存，然后选择*启动缓存向导*。
. 在配置缓存页面中，选择要缓存的一个或多个卷。
+

NOTE: 您最多可以选择 50 卷。

. 向下滚动页面以对虚拟机详细信息或卷大小进行其他更改。
. 输入缓存卷的大小（占源卷大小的百分比）。
+

TIP: 一个好的经验法则是缓存卷大小应为源卷大小的 15% 左右。

. 选中“*缓存访问*”框以将 NFS 导出策略规则和 SMB/CIFS 共享配置从源卷复制到目标缓存卷。
+
然后，源卷中的 NFS 导出策略规则和 SMB/CIFS 共享将被复制到缓存卷。如果缓存存储虚拟机上未启用 SMB/CIFS 协议，则 SMB/CIFS 共享将不会复制。

. （可选）输入缓存名称前缀。
+
后缀 `pass:macros[_cache]`附加到名称的格式如下： `<user-specified prefix>_<source volume name>_cache`

. 选择*创建缓存*。
+
新的缓存出现在缓存列表中。缓存卷名称将显示 `pass:macros[_cache]`作为源卷名称的后缀。

. 要查看操作进度，请从NetApp Console菜单中选择 *管理* > *审核*。




== NetApp Console系统页面中的步骤

. 从NetApp Console系统页面中，选择工作环境。
. 选择源系统并将其拖动到目标。image:drag-n-drop.png["拖放功能来创建缓存"]
. 选择*卷缓存*。
+
这将创建从源到目标的缓存卷。

. 在右侧窗格中的“缓存”选项框中，选择“*添加*”。
. 在缓存数据页面中，选择要缓存的系统，然后选择*启动缓存向导*。image:cache-data.png["缓存数据弹出窗口"]
. 在配置缓存页面中，选择要缓存的一个或多个卷。
+

NOTE: 您最多可以选择 50 卷。

. 向下滚动页面以对虚拟机详细信息或卷大小进行其他更改。
. 输入缓存卷的大小（占源卷大小的百分比）。
+

TIP: 一个好的经验法则是缓存卷大小应为源卷大小的 15% 左右。

+
image:create-cache.png["添加缓存的窗口"]

. 选中“*缓存访问*”框以将 NFS 导出策略规则和 SMB/CIFS 共享配置从源卷复制到目标缓存卷。
+
然后，源卷中的 NFS 导出策略规则和 SMB/CIFS 共享将被复制到缓存卷。如果缓存存储虚拟机上未启用 SMB/CIFS 协议，则 SMB/CIFS 共享将不会复制。

. （可选）输入缓存名称前缀。
+
后缀 `pass:macros[_cache]`附加到名称的格式如下： `<user-specified prefix>_<source volume name>_cache`

. 选择*创建缓存*。
+
新的缓存出现在缓存列表中。缓存卷名称将显示 `pass:macros[_cache]`作为源卷名称的后缀。

. 要查看操作进度，请从NetApp Console菜单中选择 *管理* > *审核*。

